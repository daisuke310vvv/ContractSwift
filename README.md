# ContractSwift  
Code generator for Ethereum Smart Contract.

## Demo  
- Input an abi.json of your smart contract
- Build your project with adding Run Script `${PODS_ROOT}/ContractSwift/contractswift generate . "$SRCROOT/abi.json"`

```
// abi.json
[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_subtractedValue","type":"uint256"}],"name":"decreaseApproval","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_addedValue","type":"uint256"}],"name":"increaseApproval","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"initialSupply","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[],"name":"Success","type":"event"},{"anonymous":false,"inputs":[],"name":"Failed","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_to","type":"address"},{"indexed":false,"name":"_value","type":"uint256"}],"name":"BalanceLog","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"constant":false,"inputs":[],"name":"Hoge","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"SendMel","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"}]
```

then, generated swift file below.

```
// Contract.generated.swift
//
// This is a generated file, do not edit!
// Generated by Contract.swift, see https://github.com/daisuke310vvv/ContractSwift.git
//

import Foundation
import CryptoSwift

struct Contract {
    enum Function {
        case name
        case approve(Address, BInt)
        case totalSupply
        case transferFrom(Address, Address, BInt)
        case decimals
        case decreaseApproval(Address, BInt)
        case balanceOf(Address)
        case symbol
        case transfer(Address, BInt)
        case increaseApproval(Address, BInt)
        case allowance(Address, Address)
        case Hoge
        case SendMel(Address, BInt)

        func signature() -> String {
            switch self {
            case .name:
                return "name()"
            case .approve(_,_):
                return "approve(address,uint256)"
            case .totalSupply:
                return "totalSupply()"
            case .transferFrom(_,_,_):
                return "transferFrom(address,address,uint256)"
            case .decimals:
                return "decimals()"
            case .decreaseApproval(_,_):
                return "decreaseApproval(address,uint256)"
            case .balanceOf(_):
                return "balanceOf(address)"
            case .symbol:
                return "symbol()"
            case .transfer(_,_):
                return "transfer(address,uint256)"
            case .increaseApproval(_,_):
                return "increaseApproval(address,uint256)"
            case .allowance(_,_):
                return "allowance(address,address)"
            case .Hoge:
                return "Hoge()"
            case .SendMel(_,_):
                return "SendMel(address,uint256)"
            }
        }

        func txDataString() -> String {
            switch self {
            case .name:
                return "0x" + sha3(str: signature()).toHexString().prefix(8)
            case .approve(let _spender, let _value):
                return "0x" + sha3(str: signature()).toHexString().prefix(8) + _spender.hex256bitString + _value.hex256bitString
            case .totalSupply:
                return "0x" + sha3(str: signature()).toHexString().prefix(8)
            case .transferFrom(let _from, let _to, let _value):
                return "0x" + sha3(str: signature()).toHexString().prefix(8) + _from.hex256bitString + _to.hex256bitString + _value.hex256bitString
            case .decimals:
                return "0x" + sha3(str: signature()).toHexString().prefix(8)
            case .decreaseApproval(let _spender, let _subtractedValue):
                return "0x" + sha3(str: signature()).toHexString().prefix(8) + _spender.hex256bitString + _subtractedValue.hex256bitString
            case .balanceOf(let _owner):
                return "0x" + sha3(str: signature()).toHexString().prefix(8) + _owner.hex256bitString
            case .symbol:
                return "0x" + sha3(str: signature()).toHexString().prefix(8)
            case .transfer(let _to, let _value):
                return "0x" + sha3(str: signature()).toHexString().prefix(8) + _to.hex256bitString + _value.hex256bitString
            case .increaseApproval(let _spender, let _addedValue):
                return "0x" + sha3(str: signature()).toHexString().prefix(8) + _spender.hex256bitString + _addedValue.hex256bitString
            case .allowance(let _owner, let _spender):
                return "0x" + sha3(str: signature()).toHexString().prefix(8) + _owner.hex256bitString + _spender.hex256bitString
            case .Hoge:
                return "0x" + sha3(str: signature()).toHexString().prefix(8)
            case .SendMel(let _to, let _value):
                return "0x" + sha3(str: signature()).toHexString().prefix(8) + _to.hex256bitString + _value.hex256bitString
            }
        }

        func sha3(str: String) -> Data {
            let data = Data(bytes: str.bytes)
            return data.sha3(.keccak256)
        }
    }
    
}
```

Import this file to your project.  

Use like this below.

```
    let str = Contract
        .Function
        .transfer(Address(string: "0x5c66b0d82df26e8FE165Be6628F5f5e1f1bccD5C"), BInt("100000000000000")!)
        .txDataString()

    print(str)
    // => 0xa9059cbb0000000000000000000000005c66b0d82df26e8FE165Be6628F5f5e1f1bccD5C00000000000000000000000000000000000000000000000000005af3107a4000

    // Use this for send transaction data parameter to ethereum blockchain
```

## License  
ContractSwift is available under the MIT license. See the LICENSE file for more info.
